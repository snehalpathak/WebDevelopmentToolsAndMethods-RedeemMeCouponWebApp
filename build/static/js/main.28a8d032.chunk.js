(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/spinner.414a23f5.svg"},function(e,t,a){e.exports=a(14)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(5),r=a.n(c),u=(a(12),a(13),o.a.createContext({})),s=a(2),l=a(6),d=a.n(l),i=function(){var e=Object(n.useContext)(u),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(!1),i=Object(s.a)(l,2),p=i[0],m=i[1],E=e.setLoginStatus,f=e.networkError;return o.a.createElement("div",{className:"login-container"},o.a.createElement("input",{className:"user-info",placeholder:"Enter User name",onChange:function(e){return r(e.target.value)}}),p?o.a.createElement("img",{alt:"spinner",src:d.a}):o.a.createElement("button",{className:"to-login",onClick:function(){m(!0),E(c),m(!1)}},"Login"),o.a.createElement("div",{className:"error-msg"},f))},p=function(){var e=Object(n.useContext)(u),t=e.isLoggedIn,a=e.setLogout,c=e.username;return o.a.createElement("div",null,o.a.createElement("ul",{className:"nav"},t&&o.a.createElement("li",null,"Welcome, ",c),t&&o.a.createElement("li",{className:"logout action",onClick:function(e){e.preventDefault(),a()}},"Logout")))},m={DEFAULT:"Something went wrong, please try again!!!",USERNAME_REQUIRED:"* Username is required",NETWORK_ERROR:"There was a problem reaching your network, please try again!!!",LOGIN_TO_SAVE:"Please login to save your coupons",FIELD_REQUIRED:"*All fields are required",COUPON_SAVED:"Coupon successfully saved!",DATA_EMPTY:"Data fields cannot be empty!",COPIED:"Copied!!!",UPDATE_SUCCESS:"Data updated successfully!",UPDATE_FAILED:"Update failed! Data is updated for wrong entry",DELETE_SUCCESS:"Data deleted successfully!","no valid session":"No Session found! Please login again.","login denied":"*Login denied. Please use valid user name","action not permitted":"Unauthorized user. Please try valid username!!!","no tasks for user":"No tasks found!!!","no such couponId":"Error! Coupon does not exist.","failed to update":"Failed to update task! Please enter correct data."},E=function(){var e=Object(n.useContext)(u),t=e.getUserCoupons,a=e.removeUserCoupon,c=e.userCoupons,r=e.alert,s=e.setShowFav,l=e.couponFilter,d=e.setAlert;Object(n.useEffect)((function(){t()}),[]);var i=function(e){e.preventDefault();var t=e.target.dataset.id;a(t)},p=function(e){e.preventDefault();var t=c[e.target.dataset.id];navigator.clipboard.writeText(t.code),d(m.COPIED)};return o.a.createElement("div",{className:"coupons-container"},o.a.createElement("h4",{className:"user-coupon-header"},"Saved Coupons"),o.a.createElement("button",{className:"btn-back",onClick:function(e){e.preventDefault(),s(!1)}},"Back"),o.a.createElement("p",{className:"error-msg"},r),o.a.createElement("div",{className:"coupon-container"},Object.values(c).filter((function(e){return"All"===l||e.type===l})).map((function(e,t){return o.a.createElement("div",{key:t,className:"coupon-details"},o.a.createElement("button",{className:"btn-delete","data-id":e.couponId,onClick:i},"X"),o.a.createElement("h3",{"data-id":e.couponId}," ",e.name),o.a.createElement("h4",{"data-id":e.couponId}," CODE : '",e.code,"'"),o.a.createElement("p",{"data-id":e.couponId}," ",e.description),o.a.createElement("button",{"data-id":e.couponId,className:"copy-btn",onClick:p},"Copy to Clipboard"))}))))},f=function(e){var t=e.couponId,a=Object(n.useContext)(u),c=a.allCoupons,r=a.setShowCouponDetails,s=a.alert,l=a.setAlert,d=c[t];return o.a.createElement("div",null,o.a.createElement("button",{className:"btn-back",onClick:function(e){e.preventDefault(),r(!1)}},"Back"),o.a.createElement("div",{className:"coupon-details-container"},o.a.createElement("p",{className:"copy-text"},s),o.a.createElement("h3",null,d.name),o.a.createElement("p",null,d.description),o.a.createElement("h4",null,"CODE: '",d.code,"'"),o.a.createElement("button",{className:"copy-btn",onClick:function(e){e.preventDefault(),navigator.clipboard.writeText(d.code),l(m.COPIED)}},"Copy to Clipboard")))},O=["All","Clothing","Beauty","Health","Electronics","Restaurants","Shoes","Home","Pets","Gift"],C=function(){var e=Object(n.useContext)(u),t=e.couponFilter,a=e.setCategoryFilter;return o.a.createElement("div",{className:"category-filter"},o.a.createElement("label",{className:"select-label"},"Select by Category: "),o.a.createElement("select",{value:t,onChange:function(e){a(e.target.value)}},O.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)}))))},h=function(){var e=Object(n.useContext)(u).getAllCoupons;return o.a.createElement("div",null,o.a.createElement("button",{className:"btn-refresh",onClick:function(t){t.preventDefault(),e()}},"Refresh"))},b=function(){var e=Object(n.useContext)(u),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],l=e.getAllCoupons,d=e.allCoupons,i=e.addUserCoupons,p=e.isLoggedIn,O=e.alert,b=e.setAlert,v=e.showFav,g=e.setShowFav,S=e.isCouponDetails,D=e.setShowCouponDetails,N=e.couponFilter;Object(n.useEffect)((function(){l()}),[]);var j=function(e){var t=e.target.dataset.id;p?i(t):b(m.LOGIN_TO_SAVE)},y=function(e){var t=e.target.dataset.id;r(t),D(!0)};return o.a.createElement("div",null,!S&&o.a.createElement(C,null),v&&o.a.createElement(E,null),!v&&S&&o.a.createElement(f,{couponId:c}),!v&&!S&&o.a.createElement(h,null),!v&&!S&&o.a.createElement("div",{className:"coupons-container"},p&&o.a.createElement("button",{onClick:function(){g(!0)}},"My Coupons"),o.a.createElement("p",{className:"error-msg"},O),o.a.createElement("div",{className:"coupon-container"},Object.values(d).filter((function(e){return"All"===N||e.type===N})).map((function(e,t){return o.a.createElement("div",{key:t,className:"coupon-details"},o.a.createElement("h3",{"data-id":e.couponId},e.name),o.a.createElement("p",{"data-id":e.couponId},e.description),o.a.createElement("button",{className:"coupon-btn","data-id":e.couponId,onClick:y},"SHOW CODE"),o.a.createElement("button",{"data-id":e.couponId,onClick:j},"SAVE"))})))))},v=function(e){var t=e.onSetComponent,a=Object(n.useContext)(u),c=a.addCoupons,r=a.setAlert,l=Object(n.useState)(""),d=Object(s.a)(l,2),i=d[0],p=d[1],m=Object(n.useState)(""),E=Object(s.a)(m,2),f=E[0],C=E[1],h=Object(n.useState)(""),b=Object(s.a)(h,2),v=b[0],g=b[1],S=Object(n.useState)(""),D=Object(s.a)(S,2),N=D[0],j=D[1];return o.a.createElement("div",{className:"add-coupon"},o.a.createElement("button",{className:"btn-back",onClick:function(){t(!1),r("")}},"Back"),o.a.createElement("div",{className:"add-form"},o.a.createElement("input",{className:"form-elements",type:"text",value:i,onChange:function(e){return p(e.target.value)},placeholder:"name goes here"}),o.a.createElement("input",{className:"form-elements",type:"text",value:f,onChange:function(e){return C(e.target.value)},placeholder:"coupon code  goes here"}),o.a.createElement("div",null,o.a.createElement("select",{className:"form-elements",value:v,onChange:function(e){return g(e.target.value)}},O.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)})))),o.a.createElement("textarea",{className:"form-elements-area",type:"text",value:N,onChange:function(e){return j(e.target.value)},placeholder:"coupon description goes here"})),o.a.createElement("button",{onClick:function(e){e.preventDefault(),r(""),c(i,f,v,N)&&t(!1)}},"Submit"))},g=function(){var e=Object(n.useContext)(u),t=e.allCoupons,a=e.updateCoupons,c=e.updateCouponState,r=e.deleteCoupon,l=e.alert,d=e.setAlert,i=e.couponFilter,p=Object(n.useState)(!1),m=Object(s.a)(p,2),E=m[0],f=m[1],C=Object(n.useState)(""),b=Object(s.a)(C,2),g=b[0],S=b[1],D=Object(n.useState)(""),N=Object(s.a)(D,2),j=N[0],y=N[1],T=Object(n.useState)(""),I=Object(s.a)(T,2),A=I[0],_=I[1],U=Object(n.useState)(""),P=Object(s.a)(U,2),L=P[0],k=P[1],w=function(e,t,a){switch(a){case"name":return c("name",e,t),S(t);case"code":return c("code",e,t),y(t);case"type":return c("type",e,t),_(t);case"desc":return c("desc",e,t),k(t);default:return}},R=function(e){e.preventDefault(),a(e.target.dataset.id,g,j,A,L),S(""),y(""),_(""),k("")},F=function(e){e.preventDefault(),r(e.target.dataset.id)};return o.a.createElement("div",null,E&&o.a.createElement(v,{onSetComponent:function(e){f(e)}}),o.a.createElement("p",{className:"error-msg"},l),!E&&o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("button",{className:"btn-add",onClick:function(e){e.preventDefault(),d(""),f(!0)}},"ADD"),o.a.createElement(h,null)),o.a.createElement("div",{className:"admin-coupon-container"},o.a.createElement("div",{className:"admin-label-container"},o.a.createElement("span",{className:"header-name"},"Coupon Name"),o.a.createElement("span",{className:"header-code"},"Code"),o.a.createElement("span",{className:"header-label"},"Type"),o.a.createElement("span",{className:"header-desc"},"Description")),Object.values(t).filter((function(e){return"All"===i||e.type===i})).map((function(e,t){return o.a.createElement("div",{key:t,className:"admin-list"},o.a.createElement("input",{className:"coupon-items input-height","data-id":e.couponId,type:"text",value:e.name,onChange:function(e){return w(e.target.dataset.id,e.target.value,"name")}}),o.a.createElement("input",{className:"coupon-items input-height","data-id":e.couponId,value:e.code,onChange:function(e){return w(e.target.dataset.id,e.target.value,"code")}}),o.a.createElement("select",{className:"coupon-items","data-id":e.couponId,value:e.type,onChange:function(e){return w(e.target.dataset.id,e.target.value,"type")}},O.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)}))),o.a.createElement("textarea",{className:"coupon-items-textarea","data-id":e.couponId,value:e.description,onChange:function(e){return w(e.target.dataset.id,e.target.value,"desc")}}),o.a.createElement("button",{className:"coupon-items btn-lg","data-id":e.couponId,onClick:R},"Update"),o.a.createElement("button",{className:"coupon-items btn-lg","data-id":e.couponId,onClick:F},"X"))})))))};var S=function(){var e,t=Object(n.useContext)(u),a=t.isLoggedIn,c=t.getLoginStatus,r=t.isAdmin;return Object(n.useEffect)((function(){c()}),[]),e=a?r?o.a.createElement(n.Fragment,null,o.a.createElement(p,null),o.a.createElement(g,null)):o.a.createElement(n.Fragment,null,o.a.createElement(p,null),o.a.createElement(b,null)):o.a.createElement(n.Fragment,null,o.a.createElement(i,null),o.a.createElement(b,null)),o.a.createElement("div",{className:"App"},o.a.createElement("p",{className:"header"}),e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(3),N=a(1),j=function(e,t){switch(e=Object(N.a)({},e,{couponFilter:"All",networkError:"",alert:"",updatedDataId:""}),t.type){case"GET_SESSION":return t.data.username?"admin"===t.data.username?Object(N.a)({},e,{isLoggedIn:!0,isAdmin:!0,username:t.data.username}):Object(N.a)({},e,{isLoggedIn:!0,username:t.data.username}):Object(N.a)({},e,{isLoggedIn:!1});case"SET_SESSION":return Object(N.a)({},e,{username:t.data.username,isAdmin:t.data.isAdmin,isLoggedIn:!0});case"SET_LOGOUT":return Object(N.a)({},e,{isLoggedIn:!1,showFav:!1,isCouponDetails:!1});case"GET_COUPONS":return Object(N.a)({},e,{allCoupons:t.data});case"GET_USER_COUPON":return Object(N.a)({},e,{userCoupons:t.data});case"ADD_USER_COUPON":return Object(N.a)({},e,{userCoupons:Object(N.a)({},e.userCoupons,Object(D.a)({},t.data.couponId,t.data)),alert:m.COUPON_SAVED});case"DELETE_USER_COUPON":return Object(N.a)({},e,{userCoupons:t.data});case"UPDATE_COUPON":return Object(N.a)({},e,{allCoupons:Object(N.a)({},e.allCoupons,Object(D.a)({},t.data.couponId,{name:t.data.coupon.name,code:t.data.coupon.code,type:t.data.coupon.type,description:t.data.coupon.description,couponId:t.data.couponId})),alert:t.data.message});case"DELETE_COUPON":return Object(N.a)({},e,{allCoupons:t.data.coupons,alert:t.data.message});case"ADD_COUPON":return Object(N.a)({},e,{allCoupons:Object(N.a)({},e.allCoupons,Object(D.a)({},t.data.couponId,t.data))});case"SET_ALERT":return Object(N.a)({},e,{alert:t.data});case"SHOW_FAV":return Object(N.a)({},e,{showFav:t.data});case"SHOW_COUPON_DETAILS":return Object(N.a)({},e,{isCouponDetails:t.data});case"UPDATE_NAME":return Object(N.a)({},e,{allCoupons:Object(N.a)({},e.allCoupons,Object(D.a)({},t.data.coupon.couponId,Object(N.a)({},t.data.coupon,{name:t.data.value}))),updatedDataId:t.data.id});case"UPDATE_CODE":return Object(N.a)({},e,{allCoupons:Object(N.a)({},e.allCoupons,Object(D.a)({},t.data.coupon.couponId,Object(N.a)({},t.data.coupon,{code:t.data.value}))),updatedDataId:t.data.id});case"UPDATE_TYPE":return Object(N.a)({},e,{allCoupons:Object(N.a)({},e.allCoupons,Object(D.a)({},t.data.coupon.couponId,Object(N.a)({},t.data.coupon,{type:t.data.value}))),updatedDataId:t.data.id});case"UPDATE_DESC":return Object(N.a)({},e,{allCoupons:Object(N.a)({},e.allCoupons,Object(D.a)({},t.data.coupon.couponId,Object(N.a)({},t.data.coupon,{description:t.data.value}))),updatedDataId:t.data.id});case"CATEGORY_FILTER":return Object(N.a)({},e,{couponFilter:t.data});case"NETWORK_ERROR":return Object(N.a)({},e,{networkError:t.data,isLoggedIn:!1});default:return e}},y=function(e){return{code:"network",err:e}},T=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},I=function(e){var t={isLoggedIn:!1,isAdmin:!1,username:"",allCoupons:{},userCoupons:{},networkError:"",alert:"",showFav:!1,isCouponDetails:!1,couponFilter:"All",updatedDataId:""},a=Object(n.useReducer)(j,t),c=Object(s.a)(a,2),r=c[0],l=c[1],d=function(e,t,a,n){return!!(e&&t&&a&&n)||(i(m.FIELD_REQUIRED),!1)},i=function(e){l({type:"SET_ALERT",data:e})},p=function(e){l({type:"NETWORK_ERROR",data:e||m.DEFAULT})};return o.a.createElement(u.Provider,{value:{isLoggedIn:r.isLoggedIn,isAdmin:r.isAdmin,username:r.username,allCoupons:r.allCoupons,userCoupons:r.userCoupons,networkError:r.networkError,alert:r.alert,showFav:r.showFav,isCouponDetails:r.isCouponDetails,couponFilter:r.couponFilter,updatedDataId:r.updatedDataId,getLoginStatus:function(){fetch("/session",{method:"GET"}).catch(y).then(T).then((function(e){l({type:"GET_SESSION",data:e.data})})).catch((function(e){"no valid session"!==e.code&&p(m[e.code])}))},setLoginStatus:function(e){e?function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch(y).then(T)}(e).then((function(){l("admin"===e?{type:"SET_SESSION",data:{username:e,isAdmin:!0}}:{type:"SET_SESSION",data:{username:e,isAdmin:!1}})})).catch((function(e){p(m[e.code])})):p(m.USERNAME_REQUIRED)},setLogout:function(){fetch("/session",{method:"DELETE"}).catch(y).then(T).then((function(){l({type:"SET_LOGOUT"})})).catch((function(e){p(m[e.code])}))},getAllCoupons:function(){fetch("/coupons",{method:"GET"}).catch(y).then(T).then((function(e){l({type:"GET_COUPONS",data:e.data})})).catch((function(e){p(m[e.code])}))},getUserCoupons:function(){var e;(e=r.username,fetch("/coupons/".concat(e),{method:"GET"}).catch(y).then(T)).then((function(e){l({type:"GET_USER_COUPON",data:e.data})})).catch((function(e){p(m[e.code])}))},removeUserCoupon:function(e){(function(e,t){return fetch("/coupons/".concat(e,"/").concat(t),{method:"DELETE"}).catch(y).then(T)})(r.username,e).then((function(t){delete r.userCoupons[e],l({type:"DELETE_USER_COUPON",data:r.userCoupons})})).catch((function(e){p(m[e.code])}))},addCoupons:function(e,t,a,n){if(d(e,t,a,n)){var o={name:e,code:t,type:a,description:n};return(c=r.username,u=o,fetch("/coupons/".concat(c),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({coupons:u})}).catch(y).then(T)).then((function(e){l({type:"ADD_COUPON",data:e.data})})).catch((function(e){p(m[e.code])})),!0}var c,u;return!1},deleteCoupon:function(e){var t;(t=e,fetch("/coupons/".concat(t),{method:"DELETE"}).catch(y).then(T)).then((function(){delete r.allCoupons[e],l({type:"DELETE_COUPON",data:{coupons:r.allCoupons,message:m.DELETE_SUCCESS}})})).catch((function(t){"no such couponId"===t.message?(delete r.allCoupons[e],l({type:"DELETE_COUPON",data:r.allCoupons}),l({type:"SET_ALERT",data:m[t.message]})):p(m[t.code])}))},updateCoupons:function(e,t,a,n,o){var c,u,s,d=r.allCoupons[e];if(!t&&!d.name||!a&&!d.code||!n&&!d.type||!o&&!d.description)l({type:"SET_ALERT",data:m.DATA_EMPTY});else if(r.updatedDataId&&e!==r.updatedDataId)l({type:"SET_ALERT",data:m.UPDATE_FAILED});else{var i={name:t||d.name,code:a||d.code,type:n||d.type,description:o||d.description};(c=r.username,u=e,s=i,fetch("/coupons/".concat(c,"/").concat(u),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({coupons:s})}).catch(y).then(T)).then((function(){l({type:"UPDATE_COUPON",data:{coupon:i,couponId:e,message:m.UPDATE_SUCCESS}})})).catch((function(e){p(m[e.code])}))}},addUserCoupons:function(e){var t,a,n,o=r.allCoupons[e];(t=r.username,a=e,n=o,fetch("/coupons/".concat(t,"/").concat(a),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({coupons:n})}).catch(y).then(T)).then((function(e){l({type:"ADD_USER_COUPON",data:e.data})})).catch((function(e){p(m[e.code])}))},updateCouponState:function(e,t,a){var n=r.allCoupons[t];switch(e){case"name":return l({type:"UPDATE_NAME",data:{coupon:n,value:a,id:t}});case"code":return l({type:"UPDATE_CODE",data:{coupon:n,value:a,id:t}});case"type":return l({type:"UPDATE_TYPE",data:{coupon:n,value:a,id:t}});case"desc":return l({type:"UPDATE_DESC",data:{coupon:n,value:a,id:t}});default:return}},setAlert:i,setShowFav:function(e){l({type:"SHOW_FAV",data:e})},setShowCouponDetails:function(e){l({type:"SHOW_COUPON_DETAILS",data:e})},setCategoryFilter:function(e){l({type:"CATEGORY_FILTER",data:e})}}},e.children)};r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(I,null,o.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.28a8d032.chunk.js.map